<div class="bg-[#f3ebe7] p-6 sm:p-30">
  <div class="max-w-6xl mx-auto p-6 sm:p-10 bg-white rounded-xl shadow-lg border border-gray-200">

    <!-- T√≠tulo -->
    <h2 class="mt-14 sm:mt-12 text-2xl sm:text-3xl font-bold text-green-800 mb-6 border-b-4 border-yellow-400 pb-2 text-center sm:text-left">
      Registrar Proyecto
    </h2>

    <form class="space-y-6">
      <!-- Nombre -->
      <div>
        <label class="block font-semibold mb-1 text-gray-800">Nombre del Proyecto</label>
        <input
          type="text"
          [(ngModel)]="proyecto.nombreProyecto"
          name="nombre"
          placeholder="Ej: Sistema de riego automatizado"
          class="w-full border border-gray-300 p-3 rounded focus:outline-none focus:ring-2 focus:ring-green-400"
          required
        />
      </div>

      <!-- Categor√≠a -->
      <div>
        <label class="block font-semibold mb-1 text-gray-800">Categor√≠a</label>
        <select
          name="categoria"
          [(ngModel)]="proyecto.categoria"
          class="w-full border border-gray-300 p-3 rounded focus:outline-none focus:ring-2 focus:ring-green-400"
          required
        >
          <option value="" disabled selected>Selecciona una categor√≠a</option>
          <option *ngFor="let cat of categorias" [value]="cat">{{ cat }}</option>
        </select>
      </div>

      <!-- Secci√≥n Datos Personales -->
      <label class="block text-xl font-extrabold text-green-800 mb-4 border-b-2 border-yellow-400 pb-2">
        Datos Personales
      </label>

      <!-- Estudiantes -->
      @for (estudiante of proyecto.estudiantes; track estudiante; let i = $index) {
  <div class="border p-6 mb-6 rounded-xl shadow bg-white">
    <h3 class="text-lg font-semibold text-green-700 mb-4">
      Emprendedor {{ i + 1 }}
    </h3>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">

      <!-- Nombre -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Nombres</label>
        <input type="text" [(ngModel)]="estudiante.nombres" name="nombres{{i}}"
          class="w-full border border-gray-300 p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-400" />
      </div>

      <!-- Apellidos -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Apellidos</label>
        <input type="text" [(ngModel)]="estudiante.apellidos" name="apellidos{{i}}"
          class="w-full border border-gray-300 p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-400" />
      </div>

      <!-- Identificaci√≥n -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Identificaci√≥n</label>
        <input type="text" [(ngModel)]="estudiante.identificacion" name="cc{{i}}"
          class="w-full border border-gray-300 p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-400" />
      </div>

      <!-- Programa -->
      <div *ngIf="estudiante.tipoParticipante !== 'Microempresario externo'">
        <label class="block text-sm font-medium text-gray-700 mb-1">Programa</label>
        <input type="text" [(ngModel)]="estudiante.programa" name="programa{{i}}"
          class="w-full border border-gray-300 p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-400" />
      </div>

      <!-- Celular -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Celular</label>
        <input type="text" [(ngModel)]="estudiante.tel" name="tel{{i}}"
          class="w-full border border-gray-300 p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-400" />
      </div>

      <!-- Correo -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Correo</label>
        <input type="email" [(ngModel)]="estudiante.correo" name="correo{{i}}"
          class="w-full border border-gray-300 p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-400" />
      </div>

      <!-- G√©nero -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">G√©nero</label>
        <select [(ngModel)]="estudiante.genero" name="genero{{i}}"
          class="w-full border border-gray-300 p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-400" required>
          <option value="" disabled selected>Selecciona un g√©nero</option>
          <option *ngFor="let g of generos" [value]="g">{{ g }}</option>
        </select>
      </div>

      <!-- Tipo Participante -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Categor√≠a</label>
        <select [(ngModel)]="estudiante.tipoParticipante" name="tipoParticipante{{i}}"
          class="w-full border border-gray-300 p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-400" required>
          <option value="" disabled selected>Selecciona una categor√≠a</option>
          <option *ngFor="let cat of TipoParticipante" [value]="cat">{{ cat }}</option>
        </select>
      </div>
    </div>

    <!-- Es estudiante UPC -->
    <div class="mt-6">
      <label class="block text-sm font-medium text-green-800 mb-2">
        ¬øEs estudiante de la Universidad Popular del Cesar?
      </label>
      <div class="flex flex-col sm:flex-row gap-6">
        <label class="inline-flex items-center gap-2">
          <input type="radio" name="estudianteUPC{{i}}" [(ngModel)]="estudiante.EstudianteUPC" [value]="true"
            class="text-green-600 focus:ring-green-400" />
          <span class="text-gray-800">S√≠</span>
        </label>
        <label class="inline-flex items-center gap-2">
          <input type="radio" name="estudianteUPC{{i}}" [(ngModel)]="estudiante.EstudianteUPC" [value]="false"
            class="text-green-600 focus:ring-green-400" />
          <span class="text-gray-800">No</span>
        </label>
      </div>
    </div>

    <!-- Bot√≥n Eliminar -->
    <div class="mt-6 flex justify-end">
      <button (click)="eliminarEstudiante(i)" type="button"
        class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition">
        Eliminar
      </button>
    </div>
  </div>
}

<!-- Bot√≥n Agregar -->
<div class="mt-6">
  <button (click)="agregarEstudiante()" type="button"
    class="bg-green-600 text-white px-5 py-3 rounded-lg hover:bg-green-700 transition w-full sm:w-auto">
    + Agregar otro Emprendedor
  </button>
</div>

      <!-- Redes Sociales -->
      <div>
        <label class="block text-sm font-medium text-gray-700">Redes Sociales</label>
        <input type="text" [(ngModel)]="proyecto.redesSociales" name="redesSociales"
          placeholder="Ej: @Bolsos_bonitos"
          class="w-full border border-gray-300 p-2 rounded focus:outline-none focus:ring-2 focus:ring-green-400" />
      </div>

      <!-- Logo -->
      <div class="mb-6">
        <label class="block font-semibold mb-1 text-gray-800">Logo del Proyecto üìÅ</label>
        <input type="file" (change)="onLogoSelected($event)"
          class="w-full border border-gray-300 p-3 rounded focus:outline-none focus:ring-2 focus:ring-green-400"
          accept="image/*" />
        @if (proyecto.logo) {
        <div class="text-sm text-gray-600 mt-2">Archivo seleccionado: {{ proyecto.logo}}</div>
        }
      </div>

      <!-- Bot√≥n Registrar -->
      <div class="text-center sm:text-right">
        <div *ngIf="registroExitoso"
          class="mb-6 p-4 bg-green-100 text-green-800 border border-green-300 rounded">
          ‚úÖ ¬°Proyecto registrado exitosamente!
        </div>

        <button (click)="registrar()" type="button"
          class="w-full sm:w-auto bg-green-700 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-800 transition">
          Registrar Proyecto
        </button>
      </div>
    </form>
  </div>
</div>
